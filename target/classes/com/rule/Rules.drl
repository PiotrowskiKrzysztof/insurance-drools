package com.rule

import com.javainuse.model.Contract
import com.javainuse.model.Car
import com.javainuse.model.Driver

global java.lang.Double startPrice;

rule "start price bmw"
lock-on-active
when
    $car : Car ( carMark == "BMW" )
    $contract : Contract()
then
    System.out.println("Marka samochodu: BMW");
    $contract.setPrice(startPrice * 3);
    update($contract);
end

rule "start price ford"
lock-on-active
when
    $car : Car ( carMark == "Ford" )
    $contract : Contract()
then
    System.out.println("Marka samochodu: ford");
    $contract.setPrice(startPrice * 2);
    update($contract);
end

rule "start price skoda"
lock-on-active
when
    $car : Car ( carMark == "Skoda" )
    $contract : Contract()
then
    System.out.println("Marka samochodu: skoda");
    $contract.setPrice(startPrice);
    update($contract);
end

rule "update price BMW seria 3"
no-loop
when
    $car : Car ( carMark == "BMW" && carModel == "seria 3")
    $contract : Contract()
then
    System.out.println("Model samochodu: seria 3");
    $contract.setPrice($contract.getPrice() * 1.2);
    update($contract);
end

rule "update price BMW seria 6"
no-loop
when
    $car : Car ( carMark == "BMW" && carModel == "seria 6")
    $contract : Contract()
then
    System.out.println("Model samochodu: seria 6");
    $contract.setPrice($contract.getPrice() * 1.5);
    update($contract);
end

rule "update price Ford Mondeo"
no-loop
when
    $car : Car ( carMark == "Ford" && carModel == "Mondeo")
    $contract : Contract()
then
    System.out.println("Model samochodu: Mondeo");
    $contract.setPrice($contract.getPrice() * 1.2);
    update($contract);
end

rule "update price Ford Focus"
no-loop
when
    $car : Car ( carMark == "Ford" && carModel == "Focus")
    $contract : Contract()
then
    System.out.println("Model samochodu: Mondeo");
    $contract.setPrice($contract.getPrice() * 1.1);
    update($contract);
end

rule "update price Skoda Superb"
no-loop
when
    $car : Car ( carMark == "Skoda" && carModel == "Superb")
    $contract : Contract()
then
    System.out.println("Model samochodu: Superb");
    $contract.setPrice($contract.getPrice() * 1.4);
    update($contract);
end

rule "update price Skoda Octavia"
no-loop
when
    $car : Car ( carMark == "Skoda" && carModel == "Octavia")
    $contract : Contract()
then
    $contract.setPrice($contract.getPrice() * 1.2);
    System.out.println("Model samochodu: Octavia" + $contract.getPrice());
    update($contract);
end

rule "niedoswiadczony kierowca sportowe auto"
no-loop
when
    $driver : Driver ( driverAge < 25 )
    $car : Car ( horsePower > 250 )
    $contract : Contract()
then
    $contract.setPrice($contract.getPrice() * 2);
    System.out.println("Niedoswiadczony kierowca w sportowym aucie" + $contract.getPrice());
    retract($contract)
end

rule "Sportowy samochod"
no-loop
when
    $car : Car ( horsePower > 250 )
    $contract : Contract()
then
    $contract.setPrice($contract.getPrice() * 1.2);
    System.out.println("To jest sportowy samochod" + $contract.getPrice());
end

rule "doswiadczony kierowca"
no-loop
when
    $driver : Driver ( driverAge > 25 )
    $contract : Contract()
then
    $contract.setPrice($contract.getPrice() * 0.5);
    retract($contract)
    System.out.println("To jest doswiadoczny kierowca" + $contract.getPrice());
end